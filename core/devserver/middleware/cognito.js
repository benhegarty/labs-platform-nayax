(function(_0x91184d,_0x3cc366){const _0x1c6d69=_0x2380,_0x3d8fbc=_0x91184d();while(!![]){try{const _0x36aefe=-parseInt(_0x1c6d69(0x12c))/0x1*(parseInt(_0x1c6d69(0x137))/0x2)+-parseInt(_0x1c6d69(0x14a))/0x3*(parseInt(_0x1c6d69(0x13e))/0x4)+-parseInt(_0x1c6d69(0x131))/0x5+parseInt(_0x1c6d69(0x13b))/0x6+parseInt(_0x1c6d69(0x14d))/0x7+-parseInt(_0x1c6d69(0x132))/0x8+parseInt(_0x1c6d69(0x150))/0x9;if(_0x36aefe===_0x3cc366)break;else _0x3d8fbc['push'](_0x3d8fbc['shift']());}catch(_0xe944e3){_0x3d8fbc['push'](_0x3d8fbc['shift']());}}}(_0xd306,0x1e0d4));const _0x478094=(function(){const _0x150e64=_0x2380,_0x38a007={'KxYDN':function(_0x1a0c2,_0x3602da){return _0x1a0c2===_0x3602da;},'EKIOJ':_0x150e64(0x14f)};let _0x579678=!![];return function(_0x5da4d7,_0x3ab81b){const _0x39f768=_0x150e64;if(_0x38a007['KxYDN'](_0x38a007[_0x39f768(0x15b)],_0x39f768(0x14f))){const _0x3adae1=_0x579678?function(){const _0x45281a=_0x39f768;if(_0x3ab81b){const _0x3242ff=_0x3ab81b[_0x45281a(0x136)](_0x5da4d7,arguments);return _0x3ab81b=null,_0x3242ff;}}:function(){};return _0x579678=![],_0x3adae1;}else{const _0x73f713=_0xe17c73?function(){if(_0x2f818a){const _0x382a60=_0x2ba67a['apply'](_0x2004ff,arguments);return _0x2b291c=null,_0x382a60;}}:function(){};return _0x1a1a76=![],_0x73f713;}};}()),_0x1a0828=_0x478094(this,function(){const _0x38a7cc=_0x2380,_0x4ed959={'MrLcp':'(((.+)+)+)+$'};return _0x1a0828[_0x38a7cc(0x148)]()[_0x38a7cc(0x13c)](_0x4ed959[_0x38a7cc(0x157)])[_0x38a7cc(0x148)]()[_0x38a7cc(0x160)](_0x1a0828)['search'](_0x38a7cc(0x135));});_0x1a0828();import _0x2da4ad from'jsonwebtoken';function _0x2380(_0x441506,_0x3dd61a){const _0x68fdf9=_0xd306();return _0x2380=function(_0x1a0828,_0x478094){_0x1a0828=_0x1a0828-0x12b;let _0xd306b7=_0x68fdf9[_0x1a0828];return _0xd306b7;},_0x2380(_0x441506,_0x3dd61a);}import _0x3d8e76 from'jwk-to-pem';import{default as _0x4381b3}from'http-errors';function fillLevels(_0x5833e3){const _0x6ef2bb=_0x2380,_0xb1b53b={'GtTPU':function(_0x3f8925,_0x16d390){return _0x3f8925<=_0x16d390;},'DoxeR':function(_0x227970,_0x3c26ae){return _0x227970<=_0x3c26ae;}},_0x50c881=Array[_0x6ef2bb(0x13a)](_0x5833e3)?_0x5833e3:[_0x5833e3],_0x53f120=new Set(_0x50c881);for(let _0xdb4cfa=0x1;_0xb1b53b[_0x6ef2bb(0x141)](_0xdb4cfa,0x5);_0xdb4cfa++){const _0x347b2e='L'+_0xdb4cfa;if(_0x53f120[_0x6ef2bb(0x130)](_0x347b2e)){for(let _0x5eb370=0x1;_0xb1b53b[_0x6ef2bb(0x151)](_0x5eb370,0x5);_0x5eb370++)_0x53f120[_0x6ef2bb(0x153)]('L'+_0x5eb370);}}return Array[_0x6ef2bb(0x15a)](_0x53f120);}function _0xd306(){const _0x7baedd=['status','voxOz','29VBlAjg','No\x20roles\x20specified\x20for\x20this\x20resource.','tunnelAuthBypass','custom:memberId','has','178890ZssOnQ','1643864OcCYdj','sRkGw','env','(((.+)+)+)+$','apply','15706KaPQyL','xzJxi','locals','isArray','25662yrHeAe','search','email','8DFAPwz','Role\x20has\x20insufficient\x20permissions\x20to\x20access\x20this\x20resource.','Dpwxu','GtTPU','json','MPOUE','BSMpa','error','custom:brandId','Unauthorized','toString','Error\x20fetching\x20issuer\x20keys.','59001pCnyea','cognito:groups','user','1431948mVwbNR','Error\x20verifying\x20token:','cvGwE','3803247oqkxWX','DoxeR','verify','add','KrhBT','/.well-known/jwks.json','length','MrLcp','zVFWu','CbmVA','from','EKIOJ','RbsGz','includes','send','COGNITO_AUTH_URL','constructor'];_0xd306=function(){return _0x7baedd;};return _0xd306();}const getPemFromIssuer=async()=>{const _0x3022a5=_0x2380,_0x4c2485={'MPOUE':function(_0x1a40a1,_0x170b80){return _0x1a40a1(_0x170b80);}},_0x15debe=await fetch(process[_0x3022a5(0x134)][_0x3022a5(0x15f)]+_0x3022a5(0x155));if(!_0x15debe['ok'])throw _0x4381b3[_0x3022a5(0x147)](_0x3022a5(0x149));const {keys:_0x5a5d3e}=await _0x15debe[_0x3022a5(0x142)](),_0x385358=_0x5a5d3e[0x0];return _0x4c2485[_0x3022a5(0x143)](_0x3d8e76,{'kty':_0x385358['kty'],'n':_0x385358['n'],'e':_0x385358['e']});};export const cognitoAuth=(_0x543b04=[])=>async(_0xc5920,_0x51e48d,_0xdbf509)=>{const _0x59b666=_0x2380,_0x10a5fb={'EXVLQ':function(_0x4394b7){return _0x4394b7();},'DRQWS':'No\x20authorization\x20header.','HvWIg':function(_0x228208,_0x17d088){return _0x228208===_0x17d088;},'voxOz':_0x59b666(0x12d),'xzJxi':'cognito:groups','wlygg':_0x59b666(0x13f),'BSMpa':_0x59b666(0x12f),'RbsGz':function(_0x1b8836){return _0x1b8836();},'CbmVA':_0x59b666(0x133),'Dpwxu':'jXBKH','KrhBT':_0x59b666(0x14e),'zVFWu':_0x59b666(0x147)},_0x28cddb=_0xc5920['headers']['authorization'];if(!_0x28cddb)return _0x51e48d[_0x59b666(0x139)][_0x59b666(0x12e)]?_0x10a5fb['EXVLQ'](_0xdbf509):_0x51e48d[_0x59b666(0x161)](0x193)[_0x59b666(0x15e)](_0x10a5fb['DRQWS']);const _0x21bd72=_0x28cddb;try{const _0x1247e0=await getPemFromIssuer(),_0x5c3cee=_0x2da4ad[_0x59b666(0x152)](_0x21bd72,_0x1247e0,{'issuer':process['env']['COGNITO_AUTH_URL']}),_0x2f040b=fillLevels(_0x543b04);if(_0x10a5fb['HvWIg'](0x0,_0x2f040b['length']))return _0x51e48d[_0x59b666(0x161)](0x193)[_0x59b666(0x15e)](_0x10a5fb[_0x59b666(0x12b)]);const _0x349fe4=_0x5c3cee[_0x10a5fb[_0x59b666(0x138)]]||[];if(_0x2f040b[_0x59b666(0x156)]&&!_0x349fe4['some'](_0x13ceab=>_0x2f040b[_0x59b666(0x15d)](_0x13ceab)))return _0x51e48d['status'](0x193)['send'](_0x10a5fb['wlygg']);_0xc5920[_0x59b666(0x14c)]={'id':_0x5c3cee[_0x10a5fb[_0x59b666(0x144)]],'email':_0x5c3cee[_0x59b666(0x13d)],'brandId':_0x5c3cee[_0x59b666(0x146)],'groups':_0x5c3cee[_0x59b666(0x14b)]},_0x10a5fb[_0x59b666(0x15c)](_0xdbf509);}catch(_0x3c81ff){if(_0x10a5fb[_0x59b666(0x159)]!==_0x10a5fb[_0x59b666(0x140)])return console[_0x59b666(0x145)](_0x10a5fb[_0x59b666(0x154)],_0x3c81ff['message']),_0x51e48d[_0x59b666(0x139)][_0x59b666(0x12e)]?_0x10a5fb[_0x59b666(0x15c)](_0xdbf509):_0x51e48d['status'](0x191)[_0x59b666(0x15e)](_0x10a5fb[_0x59b666(0x158)]);else{const _0x4e414e=_0x3663b9[_0x59b666(0x136)](_0x1572ed,arguments);return _0x17c053=null,_0x4e414e;}}};